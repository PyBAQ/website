<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="sitemap" type="application/xml" href="/sitemap.xml">
  <link rel="shortcut icon" href="../../ico/favicon.png">
  <link rel="stylesheet" href="../../static/pygments.css">
  <title>Una guía completa de Django para principiantes - Parte 2 </title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400&family=Raleway:wght@400;700;900&display=swap"
  rel="stylesheet"
/>
<link rel="stylesheet" href="../../static/gen/styles.css?h=5eb7d7b9" />
<link rel="stylesheet" href="" />

  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@pybaq" />
    <meta name="twitter:creator" content="@pybaq" />
    <meta name="author" content="Python Barranquilla">
    
      <meta property="og:image" content="https://pybaq.co/blog/una-guia-completa-de-django-para-principiantes-parte-2/diapositiva1.jpg" />
      <meta property="og:image:width" content="1280" />
      <meta property="og:image:height" content="720" />
    
    <meta property="og:url" content="https://pybaq.co/blog/una-guia-completa-de-django-para-principiantes-parte-2/" />
    <meta property="og:site_name" content="https://pybaq.co/" />
  
  
  <meta property="og:title" content="Una guía completa de Django para principiantes - Parte 2" />
  
    
    <meta name="twitter:creator" content="@pandrearro" />
  
  <meta name="description" content="Traducción del articulo https://simpleisbetterthancomplex.com/series/2017/09/04/a-complete-beginners-guide-to-django-part-2.html.">
  <meta property="og:type" content="article" />
  <meta property="og:description" content="Traducción del articulo https://simpleisbetterthancomplex.com/series/2017/09/04/a-complete-beginners-guide-to-django-part-2.html" />

  <script src="https://cmp.osano.com/16BZ1oRxDcinM3Poo/3ac8836f-cc6e-4294-a589-749716e8a383/osano.js"></script>
</head>

<body>
  </div><nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
  <div class="container">
    <a class="navbar-brand" href="../../">
      <img src="../../img/python.png" alt="Python" width="70" height="70">
      <img src="../../img/pybaq.svg" alt="Python Barranquilla" width="170" height="70">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        
          <li class="nav-item">
            <a class="nav-link  " href="../../">INICIO</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link  " href="../../nosotros/">NOSOTROS</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link  active" href="../">BLOG</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link  " href="../../eventos/">EVENTOS</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link  " href="../../proyectos/">PROYECTOS</a>
          </li>
        
          <li class="nav-item">
            <a class="nav-link  " href="../../contacto/">CONTACTO</a>
          </li>
        
        <li class="nav-item">
          <a class="nav-link" href="../../en/blog/una-guia-completa-de-django-para-principiantes-parte-2/">EN</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <div style="height: 95px"></div>
  

  <div class="d-flex justify-content-center">
    <p><img class="center-block img-fluid" src="diapositiva1.jpg" alt=""></p>
  </div>

<div class="d-flex justify-content-center">
  <div class="blog-post">
    <div class="post-meta blog_post-post_meta">

      <h1 class="ctitle">Una guía completa de Django para principiantes - Parte 2</h1>
      <span class="post-date">Escrito: 2020-07-14.</span> |
      <span class="post-author">
        
  
    
    <a href="../../nosotros/paula-aragon/">Paula Aragón</a>
  

      </span>
    </div>
    
    <nav class="toc">
      <h2>Tabla de Contenido</h6>
      <ul>
        
        <li><a href="#introduccion">Introducción</a>
          
        </li>
        
        <li><a href="#proyecto-web-de-tableros">Proyecto web de tableros</a>
          
          <ul>
        <li><a href="#diagrama-de-casos-de-uso">Diagrama de casos de uso</a>
          
        </li>
        
        <li><a href="#diagrama-de-clases">Diagrama de clases</a>
          
        </li>
        
        <li><a href="#wireframes">Wireframes</a>
          
        </li>
        </ul>
          
        </li>
        
        <li><a href="#modelos">Modelos</a>
          
          <ul>
        <li><a href="#migracion-de-modelos">Migración de modelos</a>
          
        </li>
        
        <li><a href="#experimentando-con-api-de-modelos">Experimentando con API de Modelos</a>
          
        </li>
        
        <li><a href="#resumen-de-las-operaciones-de-modelos">Resumen de las operaciones de Modelos</a>
          
        </li>
        </ul>
          
        </li>
        
        <li><a href="#vistas-plantillas-y-archivos-estaticos">Vistas, plantillas y archivos estáticos</a>
          
          <ul>
        <li><a href="#configuracion-del-motor-de-plantillas-de-django">Configuración del motor de plantillas de Django</a>
          
        </li>
        
        <li><a href="#probando-la-pantalla-principal">Probando la pantalla principal</a>
          
        </li>
        
        <li><a href="#configuracion-de-archivos-estaticos">Configuración de archivos estáticos</a>
          
        </li>
        </ul>
          
        </li>
        
        <li><a href="#introduccion-a-django-admin">Introducción a Django Admin</a>
          
        </li>
        
        <li><a href="#conclusiones">Conclusiones</a>
          
        </li>
        
      </ul>
    </nav>
    
    <div id="body-content" class="blog-post-body">
        <h2 id="introduccion">Introducción</h2><p>¡Bienvenidos a la segunda parte de nuestro tutorial de Django! En la lección anterior, instalamos todo lo necesario. Ojalá, todos tengan su instalación de Python 3.6 y Django 1.11 ejecutándose dentro de un Entorno Virtual. Además, ya creamos el proyecto con el que estaremos jugando. En esta lección, vamos a continuar escribiendo código en este mismo proyecto.</p>
<p>En la próxima sección, vamos a hablar un poco acerca del proyecto que vamos a desarrollar, para darte algo de contexto. Luego, aprenderás acerca de los fundamentos de Django: modelos, vistas, admins, vistas, plantillas, y URLs.</p>
<p>¡Manos a la obra!</p>
<h2 id="proyecto-web-de-tableros">Proyecto web de tableros</h2><p>No sé tú, pero personalmente, aprendo mucho más viendo ejemplos prácticos y fragmentos de código. Para mí, es difícil procesar un concepto donde por ejemplo se lee Clase A y Clase B, o cuando veo el clásico ejemplo foo(bar).</p>
<p>Así que antes de llegar a la parte divertida, jugar con modelos, vistas y demás nos tomaremos un momento para discutir brevemente acerca del proyecto que vamos a desarrollar.</p>
<p>Si ya tienes experiencia en desarrollo Web y sientes que es muy detallado, puedes simplemente pasar rápidamente por las imágenes para que tengas una idea de que vamos a construir y luego saltar a la sección Modelos de este tutorial.</p>
<p>Pero si eres novato en el desarrollo web, te recomiendo que continúes leyendo. Te daré unas buenas ideas acerca del modelamiento y diseño de aplicaciones Web. El desarrollo web, y el desarrollo de software en general, no son solo escribir código.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva2.jpg" alt=""></p>
<h3 id="diagrama-de-casos-de-uso">Diagrama de casos de uso</h3><p>Nuestro proyecto es un tablero de discusión (un foro). La idea es mantener varios tableros, los cuales se comportarán como categorías.</p>
<p>Luego, dentro de un tablero específico, un usuario puede empezar una nueva discusión creando un nuevo tema. En este tema, otros usuarios pueden participar en la discusión publicando respuestas.</p>
<p>Necesitaremos una forma de diferenciar un usuario regular de un usuario administrador porque solo estos últimos podrán crear nuevos tableros. Debajo, un vistazo de nuestros principales casos de uso y el rol de cada tipo de usuario:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva3.jpg" alt="Figura 1: Casos de uso"></p>
<h3 id="diagrama-de-clases">Diagrama de clases</h3><p>Desde el diagrama de casos de uso, podemos empezar a pensar acerca de las entidades de nuestro proyecto. Las entidades son los modelos que crearemos, y están muy relacionados con la información que nuestra aplicación Django procesará.</p>
<p>Para que podamos implementar los casos de uso descritos en la sección anterior, necesitaremos implementar al menos los siguientes modelos: Board (Tablero), Topic (Tema), Entrada (Post), User(Usuario).</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva4.jpg" alt="Figura 2: Borrado diagrama de casos de uso"></p>
<p>También es importante tomar tiempo para pensar en cómo los modelos se relacionarán entre sí. Lo que nos dicen las líneas sólidas en que, en un Tema, necesitaremos tener un campo para identificar a qué Tablero pertenece.</p>
<p>Similarmente, la Entrada necesitará un campo para representar a qué Tema pertenece y poder listar en las discusiones solamente Entradas creados en un Tema específico. Finamente, necesitaremos campos en el Tema para identificar quién empezó la discusión y en Entrada para identificar quien publicó la respuesta.</p>
<p>Podemos también tener una asociación del Tablero con el modelo Usuario, para identificar quien creó un Tablero dado. Pero esta información no es relevante en la aplicación. Hay otras formas de obtener esta información, que verás luego.
Ahora que ya tenemos la representación básica de las clases, tenemos que pensar en qué tipo de información tendrán cada uno de esos modelos. Este tipo de cosas se pueden complicar fácilmente. Así que intenta enfocarte en las partes importantes. La información que necesitas para desarrollar. Luego, podemos mejorar el modelo utilizando migraciones, las cuales verás en gran detalle en el siguiente tutorial.</p>
<p>Por ahora, esta sería una representación básica de los campos de nuestros modelos:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva5.jpg" alt="Figura 3: Diagrama de casos de uso enfatizando las relaciones entre clases"></p>
<p>Este diagrama de clases hace énfasis en la relación entre los modelos. Esas líneas y flechas serán traducidas a campos eventualmente.</p>
<p>Para el modelo Board (Tablero), empezaremos con dos campos: nombre y descripción. El campo nombre debe ser único, para evitar nombre de tableros duplicados. La descripción es solo para dar una idea sobre el propósito del tablero.</p>
<p>El modelo Topic(Tema) estará compuesto de cuatro campos: asunto, fecha de última actualización que será usada para definir el ordenamiento de los temas, creador del tema para definir qué Usuario inició el Tema, y un campo llamado tablero para definir a qué Tablero pertenece.</p>
<p>El modelo Entrada (Post) tendrá el campo mensaje, el cual será usado para almacenar el texto de las respuestas, una fecha y hora de creación usada generalmente para mantener el orden de las Entradas dentro de un Tema, una fecha y hora de actualización para informar a las Usuarios si una Entrada fue editada y cuando. Tal como los campos de fecha y hora, también haremos referencia al modelo Usuario:</p>
<p>Finalmente, el modelo Usuario. En el diagrama de clases, solo mencioné lo campos nombre de usuario, contraseña, email y la bandera esSuperUsuario porque es básicamente lo que usaremos por ahora. Es importante tener en cuento que no es necesario crear el modelo Usuario porque Django ya trae uno dentro del paquete contrib. Ese será el que usaremos.</p>
<p>Respecto a la multiplicidad en el diagrama de clases (los números 1, 0..<em>, etc.), es así como se leen:
Un Tema debe estar asociado a exactamente un Tablero (que no puede ser nulo), y un Tablero puede estar asociado con muchos Temas o con ninguno (0..</em>). Lo que significa que un Tablero puede existir sin tener ni un Tema.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva6.jpg" alt=""></p>
<p>Un Tema debe tener al menos una Entrada (Entrada Inicial), y puede tener también muchas Entradas (1..*). Una Entrada debe estar asociada con un y solo un Tema (1).</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva7.jpg" alt=""></p>
<p>Un Tema solo debe tener un Usuario asociado: el usuario autor (1). Un usuario puede tener muchos o ningún Tema (0..*).</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva8.jpg" alt=""></p>
<p>Una Entrada debe tener uno, y solo un Usuario asociado: autor (1). Un Usuario puede tener muchos o ninguna Entrada (0..*). La segunda asociación entre Entrada y Usuario es una asociación directa (ver la flecha al final de la línea), lo que significa que estamos interesados en solo un lado de la relación la cual es que el Usuario ha editado una Entrada dada. Esto será traducido en el campo actualizado_por. La multiplicidad dice 0..1, lo que significa que el campo actalizado_por puede ser nulo (la Entrada no fue editada) y debe estar asociada solo con un Usuario.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva9.jpg" alt=""></p>
<p>Otra forma de dibujar este diagrama de clases es haciendo énfasis en los campos más que en las relaciones entre los modelos:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva10.jpg" alt=""></p>
<p>La representación de arriba es equivalente a la mostrada previamente, y es también más cercana a lo que vamos a diseñar usando el API de modelos de Django. En esta representación, podemos ver más claramente que en el modelo Entrada, la asociación tema, creado por y actualizado por se convierten en campos del modelo.</p>
<p>Otra cosa interesante es que en el modelo Tema tenemos ahora una operación (un método de clase) llamado posts(). Lograremos esto implementando una relación reversa, donde Django automáticamente ejecutará una consulta en la base de datos para devolver una lista de todos las Entradas que pertenecen a un Tema específico.</p>
<p>¡Suficiente UML por ahora! Para dibujar los diagramas presentes en esta sección utilicé la herramienta StarUML.</p>
<h3 id="wireframes">Wireframes</h3><p>Despues de invertir tiempo diseñando los modelos de la aplicación, me gusta crear algunos wireframes para definir qué se debe hacer y también tener una vista clara de hacia dónde vamos.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva11.jpg" alt=""></p>
<p>Entonces basado en los wireframes podemos entender mejor las entidades existentes en la aplicación.
Lo primero que necesitamos es mostrar todos los tableros en la página principal:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva12.jpg" alt="Figura 5: Wireframe de página principal con listado de tableros"></p>
<p>Si el usuario hace click en un link, digamos Django, debería mostrar toda la lista de temas:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva13.jpg" alt="Figura 6: Wireframe de listado de temas en tablero Django"></p>
<p>Aquí tenemos dos flujos principales: Ya sea que el usuario haga click en el botón “Nuevo tema” o haga click en un tema y participe en una discusión.</p>
<p>La pantalla de “Nuevo tema”:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva14.jpg" alt="Figura 7: Pantalla de nuevo tema"></p>
<p>Ahora la pantalla de tema, mostrando las entradas y las discusiones:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva15.jpg" alt="Figura 8: Listado de temas"></p>
<p>Si el usuario hace click en botón de Responder, verán la siguiente pantalla, con un resumen de las entradas de la más antigua a la más reciente:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva16.jpg" alt="Figura 9: Responder tema"></p>
<p>Para dibujar tus wireframes puedes usar la herramienta draw.io, es gratis.</p>
<h2 id="modelos">Modelos</h2><p>Los modelos son básicamente una representación de la base de datos de tu aplicación. Lo que vamos a hacer en esta sección es crear la representación en Django de las clases que modelamos en la sección anterior: Tablero, Tema y Entrada. El modelo Usuario ya está definido en la aplicación incorporada llamada auth, la cual es listada en nuestra configuración INSTALLED_APPS bajo el nombre de django.contrib.auth.</p>
<p>Haremos todo el trabajo dentro de tableros/models.py. Esta es una representación de nuestro diagrama de clases en una aplicación Django:</p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.db</span><span class="w"> </span><span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib.auth.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">User</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Board</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Topic</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="n">subject</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
<span class="n">last_updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">board</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Board</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;topics&#39;</span><span class="p">)</span>
<span class="n">starter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;topics&#39;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Post</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">4000</span><span class="p">)</span>
<span class="n">topic</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Topic</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;posts&#39;</span><span class="p">)</span>
<span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">updated_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;posts&#39;</span><span class="p">)</span>
<span class="n">updated_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
</pre></div>
<p>Todos los modelos son subclases de django.db.models.Model. Cada clase será transformada en tablas de base de datos. Cada campo está representado en instancias de subclases de django.db.models.Field (incorporado en el core de Django) y serán traducidos en columnas.</p>
<p>Los campos CharField, DateTimeField, etc.., son todos subclases de django.db.models.Field y vienen incluidos en el core de Django – listos para usar.</p>
<p>Aquí solo usamos campos CharField, textField. DateTimeField, y ForeignKey para definir nuestros modelos. Pero Django ofrece una amplia variedad de opciones para representar distintos tipos de datos, tales como IntegerField, BooleanField, DecimalField, y muchos otros. Nos referiremos a ellos en cuanto los necesitemos.</p>
<p>Algunos campos tienen argumentos requeridos, tales como CharField. Siempre debemos establecer un max_length o longitud máxima. Esa información será usada para crear la columna en la base de datos. Django necesita saber que tan grande debe ser la columna. El parámetro max_length también será usado por Django Forms API, para validar lo que ingrese el usuario. Lo veremos más adelante.</p>
<p>En la definición del modelo Tablero, más específicamente en el campo nombre, también estamos colocando el parámetro unique=true, que como sugiere su nombre, obliga a que el campo sea único a nivel de base de datos.</p>
<p>En el modelo Entrada, el campo created_at tiene un parámetro opcional, auto_now_add con valor verdadero. Esto le dirá a Django que debe colocar la fecha y hora actual cuando una entrada es creada.</p>
<p>Una forma de crear una relación entre los modelos en utilizando un campo ForeignKey (Llave foránea). Este creará un enlace entre los modelos y una relación apropiada a nivel de base de datos. El campo Llave Foránea espera un parámetro posicional con la referencia al modelo relacionado.</p>
<p>Por ejemplo, en el modelo Tema, el campo tablero es una llave foránea al modelo Tablero. Esto de le dice a Django que una instancia de Tema se relaciona solo con una instancia de Tablero. El parámetro related_name será usado para crear una relación inversa donde las instancias de Tablero tendrán acceso a una lista de instancias de Tema que le pertenecerán.
Django automáticamente crea esta relación inversa – related_name es opcional. Pero si no le colocamos un nombre, Django le asignará: (nombre_de_la_clase_set). Por ejemplo, en el modelo Tablero, la instancia de Tema estaría disponible bajo el nombre tema_set. En cambio, si la renombramos a temas, sería mucho más natural.</p>
<p>En el modelo Post, el campo updated_by field establece related_name=’+’. Esto le indica a Django que no necesitamos esta relación inversa para que la ignore.</p>
<p>Debajo puedes ver la comparación entre el diagrama de clases y el código fuente para generar los modelos con Django. Las líneas verdes representan como estamos tratando las relaciones inversas.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva17.jpg" alt=""></p>
<p>A este punto, puede que te estés preguntando: “¿Qué pasa con las llaves primarias/IDs?”, si no especificamos una llave primaria para un modelo. Django lo creará automáticamente. En las próximas secciones, se explicará mejor cómo funciona.</p>
<h3 id="migracion-de-modelos">Migración de modelos</h3><p>El siguiente paso es decirle a Django que cree la base de datos para empezar a usarla.</p>
<p>Abre la Consola de Comandos, activa tu entorno virtual, ve a la carpeta donde se encuentra el archivo manage.py, y ejecuta los siguientes comandos:</p>
<div class="hll"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">makemigrations</span>
</pre></div>
<p>Obtendrás lo siguiente de salida:</p>
<pre><code>Migrations for 'boards':
  boards/migrations/0001_initial.py
    - Create model Board
    - Create model Post
    - Create model Topic
    - Add field topic to post
    - Add field updated_by to post
</code></pre>
<p>En este punto, Django creó un archivo llamado <code>0001_initial.py</code> dentro de la carpeta boards/migrations. Esto representa el estado actual de los modelos en nuestra aplicación. En el siguiente paso, Django utilizará este archivo para crear tablas y columnas.</p>
<p>Los archivos de migración son traducidos a sentencias SQL. Si estás familiarizado con SQL, puedes ejecutar el siguiente comando para visualizar las instrucciones que serán ejecutadas en la base de datos:</p>
<pre><code>python manage.py sqlmigrate boards 0001
</code></pre>
<p>Si no estás familiarizado, no te preocupes. No estaremos trabajando directamente con SQL en esta serie de tutoriales. Todo el trabajo será realizado utilizando el ORM de Django, el cual es una capa de abstracción que se comunica con la base de datos.</p>
<p>El siguiente paso es aplicar la migración generada a la base de datos:</p>
<pre><code>python manage.py migrate
</code></pre>
<p>La salida debería ser algo así:</p>
<pre><code>Operations to perform:
  Apply all migrations: admin, auth, boards, contenttypes, sessions
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying boards.0001_initial... OK
  Applying sessions.0001_initial... OK
</code></pre>
<p>Como es la primera vez que migramos la base de datos, comando migrate también aplicó los archivos de migración existentes de las aplicaciones Django contribs, listados en el INSTALLED_APPS. Esto es lo que se espera.</p>
<p>La línea <code>Applying boards.0001_initial... OK</code> es la migración que generamos en el paso anterior.
Eso es todo! Nuestra base de datos está lista para usar.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva18.jpg" alt=""></p>
<h3 id="experimentando-con-api-de-modelos">Experimentando con API de Modelos</h3><p>Una de las grandes ventajas de desarrollar con Python es la consola interactiva. La uso todo el tiempo. Es una forma rápida de probar cosas y experimentar con bibliotecas y APIs.</p>
<pre><code>python manage.py shell
</code></pre>
<pre><code>Python 3.6.2 (v3.6.2:5fd33b5, Jul  8 2017, 04:57:36) [MSC v.1900 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
&gt;&gt;&gt;
</code></pre>
<p>Esto es muy similar a llamar a la consola interactiva con sólo teclear python, excepto que cuando usamos python manage.py shell, estamos añadiendo nuestro proyecto al sys.path y cargando Django. Eso significa que podemos importar nuestros modelos y cualquier otro recurso dentro del proyecto y jugar con él.
Empecemos por importar la clase Board:</p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">boards.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Board</span>
</pre></div>
<p>Para crear un nuevo objeto Board, podemos hacer lo siguiente:</p>
<div class="hll"><pre><span></span><span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Django&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;This is a board about Django.&#39;</span><span class="p">)</span>
</pre></div>
<p>Para que este objeto persista en la base de datos, tenemos que llamar al método save:</p>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>El método save se utiliza tanto para crear como para actualizar objetos. Aquí Django creó un nuevo objeto porque la instancia del Board no tenía identificación. Después de guardarlo por primera vez, Django establecerá el id automáticamente:</p>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">id</span>
<span class="mi">1</span>
</pre></div>
<p>Puedes acceder al resto de los campos como atributos de Python:</p>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">name</span>
<span class="s1">&#39;Django&#39;</span>
</pre></div>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">description</span>
<span class="s1">&#39;This is a board about Django.&#39;</span>
</pre></div>
<p>Para actualizar un valor se puede realizar de la siguiente forma:</p>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Django discussion board.&#39;</span>
<span class="n">board</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
<p>Cada modelo de Django viene con un atributo especial; lo llamamos Gestor de Modelos. Puedes acceder a él a través de los objetos de atributos de Python. Se utiliza principalmente para ejecutar consultas en la base de datos. Por ejemplo, podríamos usarlo para crear directamente un nuevo objeto de Tablero:</p>
<div class="hll"><pre><span></span><span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Python&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;General discussion about Python.&#39;</span><span class="p">)</span>
</pre></div>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">id</span>
<span class="mi">2</span>
</pre></div>
<div class="hll"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">name</span>
<span class="s1">&#39;Python&#39;</span>
</pre></div>
<p>Así que, ahora mismo tenemos dos tableros. Podemos usar objects para listar todos los tableros existentes en la base de datos:</p>
<div class="hll"><pre><span></span><span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">QuerySet</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Board</span><span class="p">:</span> <span class="n">Board</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Board</span><span class="p">:</span> <span class="n">Board</span> <span class="nb">object</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>
</pre></div>
<p>El resultado fue un QuerySet. Aprenderemos más sobre eso más adelante. Básicamente, es una lista de objetos de la base de datos. Podemos ver que tenemos dos objetos, pero sólo podemos leer el objeto Board. Eso es porque no hemos definido el método <strong>str</strong> en el modelo de Board.
El método <strong>str</strong> es una representación String de un objeto. Podemos usar el nombre del tablero para representarlo.</p>
<p>Primero, salgamos de la consola interactiva:</p>
<pre><code>exit()
</code></pre>
<p>Ahora edita el archivo models.py dentro de la aplicación:</p>
<div class="hll"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Board</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>
<p>Intentemos de nuevo la consulta. Abre la consola interactiva de nuevo:</p>
<pre><code>python manage.py shell
</code></pre>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">boards.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Board</span>

<span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">QuerySet</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Board</span><span class="p">:</span> <span class="n">Django</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Board</span><span class="p">:</span> <span class="n">Python</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>
</pre></div>
<p>Mucho mejor, ¿cierto?</p>
<p>Podemos tratar este QuerySet como una lista. Digamos que queremos iterar sobre ella e imprimir la descripción de cada tablero:</p>
<div class="hll"><pre><span></span><span class="n">boards_list</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="k">for</span> <span class="n">board</span> <span class="ow">in</span> <span class="n">boards_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
</pre></div>
<p>El resultado sería:</p>
<pre><code>Django discussion board.
General discussion about Python.
</code></pre>
<p>Del mismo modo, podemos usar el gestor de modelos para consultar la base de datos y devolver un solo objeto. Para ello utilizamos el método get:</p>
<div class="hll"><pre><span></span><span class="n">django_board</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">django_board</span><span class="o">.</span><span class="n">name</span>
<span class="s1">&#39;Django&#39;</span>
</pre></div>
<p>Pero tenemos que tener cuidado con este tipo de operación. Si intentamos conseguir un objeto que no existe, por ejemplo, un tablero con id=3, se levantará una excepción:</p>
<div class="hll"><pre><span></span><span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">boards</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span> <span class="n">Board</span> <span class="n">matching</span> <span class="n">query</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="o">.</span>
</pre></div>
<p>Podemos usar el método get con cualquier campo modelo, pero preferiblemente usar un campo que pueda identificar un objeto de forma única. De lo contrario, la consulta puede devolver más de un objeto, lo que causará una excepción.</p>
<div class="hll"><pre><span></span><span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Django&#39;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">Board</span><span class="p">:</span> <span class="n">Django</span><span class="o">&gt;</span>
</pre></div>
<p>Tenga en cuenta que la consulta es sensible a las mayúsculas, un "django" en minúsculas no coincidiría:</p>
<div class="hll"><pre><span></span><span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;django&#39;</span><span class="p">)</span>
<span class="n">boards</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span> <span class="n">Board</span> <span class="n">matching</span> <span class="n">query</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span><span class="o">.</span>
</pre></div>
<h3 id="resumen-de-las-operaciones-de-modelos">Resumen de las operaciones de Modelos</h3><p>A continuación figura un resumen de los métodos y operaciones que aprendimos en esta sección, utilizando el modelo Tablero como referencia. Board en mayúsculas se refiere a la clase, board en minúsculas se refiere a una instancia (u objeto) de la clase del modelo Board:</p>
<table>
<thead><tr>
<th>Operación</th>
<th>Código</th>
</tr>
</thead>
<tbody>
<tr>
<td>Crear un objeto sin guardar</td>
<td>board = Board()</td>
</tr>
<tr>
<td>Guardar un objeto (crear o actualizar)</td>
<td>board.save()</td>
</tr>
<tr>
<td>Crear y guardar un objeto en base de datos</td>
<td>Board.objects.create(name='...', description='...')</td>
</tr>
<tr>
<td>Listar todos los objetos</td>
<td>Board.objects.all()</td>
</tr>
<tr>
<td>Obtener un objeto, identificado por un campo</td>
<td>Board.objects.get(id=1)</td>
</tr>
</tbody>
</table>
<p>En la siguiente sección, vamos a empezar a escribir vistas y a mostrar nuestros tableros en páginas HTML.</p>
<h2 id="vistas-plantillas-y-archivos-estaticos">Vistas, plantillas y archivos estáticos</h2><p>Por el momento ya tenemos una vista llamada Home que muestra "¡Hola, Mundo!" en la página principal de nuestra aplicación.</p>
<p><strong>myproject/urls.py</strong></p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf.urls</span><span class="w"> </span><span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib</span><span class="w"> </span><span class="kn">import</span> <span class="n">admin</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">boards</span><span class="w"> </span><span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^$&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">.</span><span class="n">home</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;home&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
<p><strong>boards/views.py</strong></p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.http</span><span class="w"> </span><span class="kn">import</span> <span class="n">HttpResponse</span>

<span class="k">def</span><span class="w"> </span><span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">)</span>
</pre></div>
<p>Podemos usar esto como punto de partida. Si recuerdan nuestros wireframes, la figura 5 mostraba cómo debería ser la página de inicio. Lo que queremos hacer es mostrar una lista de tableros en una tabla junto con alguna otra información.</p>
<p>Lo primero que hay que hacer es importar el modelo Board y hacer una lista de todos los tableros existentes:</p>
<p><strong>boards/views.py</strong></p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.http</span><span class="w"> </span><span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Board</span>

<span class="k">def</span><span class="w"> </span><span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">boards</span> <span class="o">=</span> <span class="n">Board</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">boards_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">board</span> <span class="ow">in</span> <span class="n">boards</span><span class="p">:</span>
        <span class="n">boards_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="n">response_html</span> <span class="o">=</span> <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">boards_names</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">response_html</span><span class="p">)</span>
</pre></div>
<p>Y el resultado sería esta sencilla página HTML:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva19.jpg" alt=""></p>
<p>Pero hagamos una pausa aquí. No vamos a ir muy lejos renderizando el HTML de esta manera. Para esta simple vista, todo lo que necesitamos es una lista de tableros; luego la parte de renderizado es un trabajo para el Motor de Plantillas Django.</p>
<h3 id="configuracion-del-motor-de-plantillas-de-django">Configuración del motor de plantillas de Django</h3><p>Crea una nueva carpeta llamada templates (plantillas) al mismo nivel que las carpetas boards y mysite:</p>
<pre><code>myproject/
 |-- myproject/
 |    |-- boards/
 |    |-- myproject/
 |    |-- templates/   &lt;-- Aquí!
 |    +-- manage.py
 +-- venv/
</code></pre>
<p>Ahora dentro de la carpeta templates, crea un archivo HTML llamado home.html:</p>
<p><strong>templates/home.html</strong></p>
<div class="hll"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

    {% for board in boards %}
      {{ board.name }} <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    {% endfor %}

  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>En este ejemplo, estamos mezclando HTML puro con algunas etiquetas especiales <code>{% for ... in ... %}</code> y <code>{{ variable }}</code>. Estas son parte del lenguaje de plantillas de Django. También se muestra cómo iterar sobre una lista de objetos utilizando un ciclo for. <code>{{ board.name }}</code> muestra el nombre del tablero en la plantilla HTML, generando un documento HTML dinámico.</p>
<p>Antes de poder usar esta página HTML, tenemos que decirle a Django dónde encontrar las plantillas de nuestra aplicación. Abre el archivo setting.py dentro de la carpeta myproject, busca por la variable TEMPLATES y cambia el valor de DIRS a <code>os.path.join(BASE_DIR, 'templates')</code>:</p>
<div class="hll"><pre><span></span><span class="n">TEMPLATES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.template.backends.django.DjangoTemplates&#39;</span><span class="p">,</span>
        <span class="s1">&#39;DIRS&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;templates&#39;</span><span class="p">)</span>
        <span class="p">],</span>
        <span class="s1">&#39;APP_DIRS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;OPTIONS&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;context_processors&#39;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s1">&#39;django.template.context_processors.debug&#39;</span><span class="p">,</span>
                <span class="s1">&#39;django.template.context_processors.request&#39;</span><span class="p">,</span>
                <span class="s1">&#39;django.contrib.auth.context_processors.auth&#39;</span><span class="p">,</span>
                <span class="s1">&#39;django.contrib.messages.context_processors.messages&#39;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>
</pre></div>
<p>Básicamente lo que esta línea está haciendo es encontrar la ruta completa de tu directorio de proyecto y agregarle "/templates".</p>
<p>Podemos depurar esto usando el shell de Python:</p>
<div class="hll"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">shell</span>
</pre></div>
<p>¿Lo ves? Estamos apuntando a la carpeta templates que creamos en pasos anteriores.
Ahora podemos actualizar nuestra vista Home.</p>
<p><strong>boards/views.py</strong></p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.conf</span><span class="w"> </span><span class="kn">import</span> <span class="n">settings</span>

<span class="n">settings</span><span class="o">.</span><span class="n">BASE_DIR</span>
<span class="s1">&#39;/Users/vitorfs/Development/myproject&#39;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;templates&#39;</span><span class="p">)</span>
<span class="s1">&#39;/Users/vitorfs/Development/myproject/templates&#39;</span>
</pre></div>
<p>El HTML resultante es:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva20.jpg" alt=""></p>
<p>Podemos mejorar la plantilla HTML usando una tabla:</p>
<p><strong>templates/home.html</strong></p>
<div class="hll"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">&quot;1&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Board<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Posts<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Topics<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Last Post<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
        {% for board in boards %}
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
              {{ board.name }}<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">small</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;color: #888&quot;</span><span class="p">&gt;</span>{{ board.description }}<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
      <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva21.jpg" alt=""></p>
<h3 id="probando-la-pantalla-principal">Probando la pantalla principal</h3><p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva22.jpg" alt="">
Este va a ser un tema recurrente, y vamos a explorar juntos diferentes conceptos y estrategias a lo largo de toda la serie de tutoriales.</p>
<p>Vamos a escribir nuestro primer test. Por ahora, trabajaremos en el archivo tests.py dentro de la aplicación de tableros:</p>
<p><strong>boards/tests.py</strong></p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.core.urlresolvers</span><span class="w"> </span><span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.test</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestCase</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HomeTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_home_view_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</pre></div>
<p>Este es un caso de prueba muy simple pero extremadamente útil. Estamos probando el código de estado de la respuesta. El código de estado 200 significa éxito.</p>
<p>Podemos comprobar el código de estado de la respuesta en la consola:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva23.jpg" alt=""></p>
<p>Si hubiera una excepción no capturada, un error de sintaxis o algo así, Django devolvería en su lugar un código de estado 500, que significa Internal Server Error. Ahora, imagina que nuestra aplicación tiene 100 vistas. Si escribiéramos esta simple prueba para todas nuestras vistas, con un solo comando, podríamos comprobar si todas las vistas devuelven un código de éxito, de modo que el usuario no vea ningún mensaje de error en ninguna parte. Sin pruebas automatizadas, necesitaríamos comprobar cada página, una por una.</p>
<p>Para ejecutar el conjunto de pruebas de Django:</p>
<pre><code>python manage.py test
</code></pre>
<pre><code>Creating test database for alias 'default'...
System check identified no issues (0 silenced).
.
----------------------------------------------------------------------
Ran 1 test in 0.041s

OK
Destroying test database for alias 'default'...
</code></pre>
<p>Ahora podemos probar si Django devolvió la función de vista correcta para la URL solicitada. Esta también es una prueba útil porque a medida que avanzamos en el desarrollo, verán que el módulo urls.py puede llegar a ser muy grande y complejo. La configuración de las URL se basa la resolución de expresiones regulares (regex). Hay algunos casos en los que tenemos una URL muy permisiva, por lo que Django puede terminar devolviendo la función de visualización errónea.</p>
<p>Así es como lo hacemos:</p>
<p><strong>boards/tests.py</strong></p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.core.urlresolvers</span><span class="w"> </span><span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.urls</span><span class="w"> </span><span class="kn">import</span> <span class="n">resolve</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">django.test</span><span class="w"> </span><span class="kn">import</span> <span class="n">TestCase</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.views</span><span class="w"> </span><span class="kn">import</span> <span class="n">home</span>

<span class="k">class</span><span class="w"> </span><span class="nc">HomeTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_home_view_status_code</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_home_url_resolves_home_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">view</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">home</span><span class="p">)</span>
</pre></div>
<p>En la segunda prueba, estamos haciendo uso de la función de resolución. Django la utiliza para hacer coincidir una URL solicitada con una lista de URLs listadas en el módulo urls.py. Esta prueba se asegurará de que la URL /, que es la URL raíz, devuelva la vista de inicio.</p>
<p>Prueba de nuevo:</p>
<pre><code>python manage.py test
</code></pre>
<pre><code>Creating test database for alias 'default'...
System check identified no issues (0 silenced).
..
----------------------------------------------------------------------
Ran 2 tests in 0.027s

OK
Destroying test database for alias 'default'...
</code></pre>
<p>Para ver más detalles sobre la ejecución de la prueba, pongan VERBOSITY en un nivel más alto:</p>
<pre><code>python manage.py test --verbosity=2
</code></pre>
<pre><code>Creating test database for alias 'default' ('file:memorydb_default?mode=memory&amp;cache=shared')...
Operations to perform:
  Synchronize unmigrated apps: messages, staticfiles
  Apply all migrations: admin, auth, boards, contenttypes, sessions
Synchronizing apps without migrations:
  Creating tables...
    Running deferred SQL...
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying boards.0001_initial... OK
  Applying sessions.0001_initial... OK
System check identified no issues (0 silenced).
test_home_url_resolves_home_view (boards.tests.HomeTests) ... ok
test_home_view_status_code (boards.tests.HomeTests) ... ok

----------------------------------------------------------------------
Ran 2 tests in 0.017s

OK
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&amp;cache=shared')...
</code></pre>
<p>La verbosidad determina la cantidad de información de notificación y depuración que se imprimirá en la consola; 0 es sin salida, 1 es salida normal y 2 es salida detallada.</p>
<h3 id="configuracion-de-archivos-estaticos">Configuración de archivos estáticos</h3><p>Los archivos estáticos son el CSS, JavaScripts, Fuentes, Imágenes, o cualquier otro recurso que podamos usar para componer la interfaz de usuario.</p>
<p>Tal como está, Django no sirve esos archivos. Excepto durante el proceso de desarrollo, para hacernos la vida más fácil. Pero Django proporciona algunas características para ayudarnos a gestionar los archivos estáticos. Esas características están disponibles en la aplicación django.contrib.staticfiles ya listada en la configuración INSTALLED_APPS.</p>
<p>Con tantas bibliotecas de componentes de interfaz disponibles, no hay razón para que sigamos renderizando documentos HTML básicos. Podemos añadir fácilmente Bootstrap 4 a nuestro proyecto. Bootstrap es un kit de herramientas de código abierto para desarrollar con HTML, CSS y JavaScript.</p>
<p>En el directorio raíz del proyecto, junto con las tablas, plantillas y carpetas de myproject, crea una nueva carpeta llamada static, y dentro de la carpeta static crea otra llamada css:</p>
<pre><code>myproject/
 |-- myproject/
 |    |-- boards/
 |    |-- myproject/
 |    |-- templates/
 |    |-- static/       &lt;-- aquí
 |    |    +-- css/     &lt;-- y aquí
 |    +-- manage.py
 +-- venv/
</code></pre>
<p>Ve a getbootstrap.com y descarga la versión más reciente:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva24.jpg" alt=""></p>
<p>Descarga la versión compilada de CSS y JS.</p>
<p>En tu ordenador, extrae el archivo bootstrap-4.0.0-beta-dist.zip que has descargado de la web de Bootstrap, copia el archivo css/bootstrap.min.css en la carpeta css de nuestro proyecto:</p>
<pre><code>myproject/
 |-- myproject/
 |    |-- boards/
 |    |-- myproject/
 |    |-- templates/
 |    |-- static/
 |    |    +-- css/
 |    |         +-- bootstrap.min.css    &lt;-- aquí
 |    +-- manage.py
 +-- venv/
</code></pre>
<p>El siguiente paso es indicarle a Django dónde encontrar los archivos estáticos. Abre el archivo settings.py, desplázate hasta el fondo del archivo y justo después de STATIC_URL, añade lo siguiente:</p>
<div class="hll"><pre><span></span><span class="n">STATIC_URL</span> <span class="o">=</span> <span class="s1">&#39;/static/&#39;</span>

<span class="n">STATICFILES_DIRS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;static&#39;</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
<p>Lo mismo que el directorio de templates, ¿recuerdas?
Ahora tenemos que cargar los archivos estáticos (el archivo CSS de Bootstrap) en nuestra plantilla:</p>
<p><strong>templates/home.html</strong></p>
<div class="hll"><pre><span></span>{% load static %}
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{% static &#39;css/bootstrap.min.css&#39; %}&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="cm">&lt;!-- body suppressed for brevity ... --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>Primero cargamos las etiquetas de la plantilla de la Aplicación de Archivos Estáticos usando <code>{% load static %}</code> al principio de la plantilla.</p>
<p>La etiqueta de la plantilla <code>{% static %}</code> se usa para componer el URL donde vive el recurso. En este caso, <code>{% static 'css/bootstrap.min.css' %}</code> devolverá <code>/static/css/bootstrap.min.css</code>, lo que equivale a <a href="http://127.0.0.1:8000/static/css/bootstrap.min.css">http://127.0.0.1:8000/static/css/bootstrap.min.css</a>.</p>
<p>La etiqueta de la plantilla <code>{% static %}</code> utiliza la configuración STATIC_URL en el settings.py para componer la URL final. Por ejemplo, si alojara sus archivos estáticos en un subdominio como <a href="https://static.example.com/">https://static.example.com/</a>, estableceríamos <code>STATIC_URL=https://static.example.com/</code> y entonces el <code>{% static 'css/bootstrap.min.css' %}</code> devolvería <a href="https://static.example.com/css/bootstrap.min.css">https://static.example.com/css/bootstrap.min.css</a>.</p>
<p>Si nada de esto tiene sentido para ti en este momento, no te preocupes. Sólo recuerda usar el <code>{% static %}</code> siempre que necesites referirte a un archivo CSS, JavaScript o de imagen. Más tarde, cuando empecemos a trabajar con el Despliegue, discutiremos más sobre ello. Por ahora, estamos listos.</p>
<p>Actualizando la página 127.0.0.1:8000 podemos ver que funcionó:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva25.jpg" alt=""></p>
<p>Ahora podemos editar la plantilla para aprovechar el CSS de Bootstrap:</p>
<div class="hll"><pre><span></span>{% load static %}
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{% static &#39;css/bootstrap.min.css&#39; %}&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">ol</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;breadcrumb my-4&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;breadcrumb-item active&quot;</span><span class="p">&gt;</span>Boards<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">table</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;table&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">thead</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;thead-inverse&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Board<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Posts<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Topics<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Last Post<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
          {% for board in boards %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
                {{ board.name }}
                <span class="p">&lt;</span><span class="nt">small</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-muted d-block&quot;</span><span class="p">&gt;</span>{{ board.description }}<span class="p">&lt;/</span><span class="nt">small</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;align-middle&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">td</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;align-middle&quot;</span><span class="p">&gt;</span>0<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
          {% endfor %}
        <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
<p>El resultado ahora:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva26.jpg" alt=""></p>
<p>Hasta ahora estamos agregando nuevos tableros usando la consola interactiva (python manage.py shell). Pero necesitamos una mejor manera de hacerlo. En la siguiente sección, vamos a implementar una interfaz de administración para que el administrador del sitio web los gestione.</p>
<h2 id="introduccion-a-django-admin">Introducción a Django Admin</h2><p>Cuando empezamos un nuevo proyecto, Django viene configurado con Django Admin en la lista de INSTALLED_APPS.</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva34.jpg" alt=""></p>
<p>Un buen caso de uso de Django Admin es por ejemplo en un blog; puede ser usado por los autores para escribir y publicar artículos. Otro ejemplo es un sitio de e-commerce, donde los miembros pueden crear, editar y eliminar productos.</p>
<p>Por ahora configuraremos Django Admin para hacer mantenimiento los tableros de la aplicación.</p>
<p>Empecemos creando la cuenta de administrador:</p>
<pre><code>python manage.py createsuperuser
</code></pre>
<p>Sigue las instrucciones</p>
<pre><code>Username (leave blank to use 'vitorfs'): admin
Email address: admin@example.com
Password:
Password (again):
Superuser created successfully.
</code></pre>
<p>Ahora abre la url en un navegador <a href="http://127.0.0.1:8000/admin/">http://127.0.0.1:8000/admin/</a></p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva28.jpg" alt=""></p>
<p>Ingresa el usuario y la contraseña para entrar en la interfaz de administración:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva29.jpg" alt=""></p>
<p>Ya viene con algunas funciones configuradas. Aquí podemos agregar Usuarios y Grupos para gestionar permisos. Exploraremos esos conceptos luego.</p>
<p>Para añadir el modelo Tablero es muy sencillo. Abre el archivo Admin.py en la dirección tableros, y agrega el siguiente código:</p>
<p>boards/Admin.py</p>
<div class="hll"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.contrib</span><span class="w"> </span><span class="kn">import</span> <span class="n">admin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">Board</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Board</span><span class="p">)</span>
</pre></div>
<p>Guarda el archivo Admin.py, y refresca la página en tu navegador:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva30.jpg" alt=""></p>
<p>¡Eso es todo! Está listo para ser usado. Haz click en el botón Tableros para ver la lista de tableros existentes:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva31.jpg" alt=""></p>
<p>Podemos agregar un nuevo tablero haciendo click en el botón Agregar Tablero</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva32.jpg" alt=""></p>
<p>Click en el botón Guardar:</p>
<p><img src="../../img/posts/2020/guia-django-principiantes-2/Diapositiva33.jpg" alt=""></p>
<p>Podemos comprobar si todo funciona abriendo la url <a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></p>
<h2 id="conclusiones">Conclusiones</h2><p>En este tutorial, exploramos muchos conceptos. Definimos algunos requerimientos de nuestro proyecto, creamos los primeros modelos, migramos la base de datos, comenzamos a jugar con Models API. Creamos nuestra primera vista y escribimos algunas pruebas unitarias. También configuramos el motor de plantillas de Django, archivos estáticos, agregamos la librería de Bootstrap 4 al proyecto. Finalmente, tuvimos una breve introducción a la interfaz de Django Admin.</p>
<p><em>Traducido de <a href="https://simpleisbetterthancomplex.com/series/2017/09/11/a-complete-beginners-guide-to-django-part-2.html">https://simpleisbetterthancomplex.com/series/2017/09/11/a-complete-beginners-guide-to-django-part-2.html</a></em></p>

        <div class="comments">
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() { this.page.identifier = "/blog/una-guia-completa-de-django-para-principiantes-parte-2"; this.page.url = "https://pybaq.co/blog/una-guia-completa-de-django-para-principiantes-parte-2/"; };
  (function() {
    var d = document, s = d.createElement('script');
    s.src = '//python-barranquilla.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript"
    rel="nofollow">comments powered by Disqus.</a>
</noscript>
</div>
    </div>
  </div>
</div>


  <div class="share-buttons">
    
    
      <a  href="https://www.facebook.com/sharer/sharer.php?u=https://pybaq.co/blog/una-guia-completa-de-django-para-principiantes-parte-2/"
        class="facebook"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Compartir en facebook" >
        <i class="fa fa-facebook-official share-button"></i>
      </a>
    
      <a  href="https://twitter.com/intent/tweet?text=Una%20guía%20completa%20de%20Django%20para%20principiantes%20-%20Parte%202&amp;url=https://pybaq.co/blog/una-guia-completa-de-django-para-principiantes-parte-2/"
        class="twitter"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Compartir en twitter" >
        <i class="fa fa-twitter share-button"></i>
      </a>
    
      <a  href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://pybaq.co/blog/una-guia-completa-de-django-para-principiantes-parte-2/&amp;title=Una%20guía%20completa%20de%20Django%20para%20principiantes%20-%20Parte%202"
        class="linkedin"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
        title="Compartir en linkedin" >
        <i class="fa fa-linkedin share-button"></i>
      </a>
    
  </div>



  <footer class="dq-footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-4">
        <h4>Sobre Nosotros</h4>
        <p>Python Barranquilla es una comunidad para todos los interesados en desarrollar aplicaciones en Python dentro de la ciudad de Barranquilla (Atlántico).</p>
      </div>
      <div class="col-lg-4">
        <h4>Canales</h4>
        <div class="hline-w"></div>
        <p>
          <a href="https://discord.gg/46N5dPm9Zk" target="_blank" rel="noopener"><i class="fa-brands fa-discord"></i></a>
          <a href="https://youtube.com/playlist?list=PL1GXDqy0kMh_FC2DnDnWb4MBlHAvdLn0T" target="_blank" rel="noopener"><i class="fa-brands fa-youtube"></i></a>
          <a href="https://t.me/+yH4gst5h7DBjODYx" target="_blank" rel="noopener"><i class="fa-brands fa-telegram"></i></a>
          <a href="https://whatsapp.com/channel/0029Va0qa3A6hENtyhQuhH2Q" target="_blank" rel="noopener"><i class="fa-brands fa-whatsapp"></i></a>
        </p>
        <h4>Redes sociales</h4>
        <div class="hline-w"></div>
        <p>
          <a href="https://meetup.com/pythonbaq/" target="_blank" rel="noopener"><i class="fa-brands fa-meetup"></i></a>
          <a href="http://twitter.com/pybaq" target="_blank" rel="noopener"><i class="fa-brands fa-twitter"></i></a>
          <a href="https://www.linkedin.com/company/python-barranquilla/" target="_blank" rel="noopener"><i class="fa-brands fa-linkedin"></i></a>
          <a href="https://facebook.com/pybaq" target="_blank" rel="noopener"><i class="fa-brands fa-facebook"></i></a>
          <a href="https://instagram.com/pybaq" target="_blank" rel="noopener"><i class="fa-brands fa-instagram"></i></a>
          <a href="https://github.com/PyBAQ" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i></a>
        </p>
      </div>
      <div class="col-lg-4">
        <h4>Nuestros lineamientos</h4>
        <p>
          La recolección de datos del presente sitio web se rige por la
          <a href="../../cookies/">Política de cookies</a>

        </p>
        <p>
          En nuestra comunidad seguimos este
          <a href="../../codigo-de-conducta/">Código de conducta</a>
					y usamos este <a href="../../procedimiento-codigo-de-conducta/">Procedimiento de Aplicación.</a>
        </p>
        <p>
          Además, seguimos esta
          <a href="../../politica-de-salud-y-seguridad/">Política de salud y seguridad.</a>
        </p>
      </div>
    </div>
  </div>
</footer>
  <script src="../../js/bootstrap.min.js"></script>
<script
  src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js"
  crossorigin="anonymous"
></script>
<script src="../../js/custom.js"></script>

<!--[if lt IE 9
  ]><script src="../../assets/js/ie8-responsive-file-warning.js"></script
><![endif]-->
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
</body>
</html>
